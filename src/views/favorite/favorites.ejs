<!DOCTYPE html>
<html>
<head>
    <% include ../static/partials/header.ejs %>
    <% include ../static/partials/navbar.ejs %>

</head>

<body>
    <% include ../static/partials/messages.ejs %>
        
    <div>
        <h3>Your favorited songs</h3>
        <div>
            <% songs.forEach((song) => { %>
                <div >
                    <form action="/songs/play" method="POST" id="myform">
                        <input type="hidden" name="song" value="<%= song %>"/>
                        <input type="hidden" name="play" value="play"/>
                        <div onclick="document.getElementById('myform').submit()">
                            <iframe type="submit" class="float-left" width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/<%= song.sound %>&color=%23387187&auto_play=false&hide_related=false&show_comments=false&show_user=true&show_reposts=false&show_teaser=false"></iframe>
                        </div>
                    </form>
                    <% if(typeof currentUser !== 'undefined') { %>
                        <% if(song.getFavorites(currentUser.id)) { %> 
                            <form action="/songs/unfavorite" method="POST">
                                <button type="submit" name="songId" value="<%= song.id %>" class="btn btn-danger">Unfavorite</button>
                            </form>
                        <% } else { %> 
                            <form action="/songs/favorite" method="POST">
                                <button type="submit" name="songId" value="<%= song.id %>" class="btn btn-primary float-left">Favorite</button>
                            </form>
                        <% } %>
                    <% } %>
                    <div>number of plays: <%= song.plays %></div>
                </div>
            <% }) %>
        </div>    
    </div>
</body>

<% include ../static/partials/baseScripts.ejs %>

</html>
